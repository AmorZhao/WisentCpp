\documentclass[12pt,twoside]{report}
\usepackage[a4paper,hmargin=2.5cm,vmargin=2.5cm,includeheadfoot]{geometry}

\newcommand{\reporttitle}{Wisent++: A C++ Library for Composability-Enabled Data File Formats}
\newcommand{\reportauthor}{Amor Zhao}
\newcommand{\supervisor}{Dr. Holger Pirk}
\newcommand{\secondmarker}{Pending}
\newcommand{\reporttype}{MEng Individual Project \\ Interim Report}
\newcommand{\cid}{02019680}

\usepackage{colortbl}
\usepackage{ifxetex}
\usepackage{textpos}
\usepackage{stackengine}
\usepackage{tabularx,longtable,multirow,subfigure,caption}
\usepackage{fancyhdr}
\usepackage[bottom]{footmisc}
\usepackage[tight,ugly]{units}
\usepackage{url}
\usepackage{float}
\usepackage[english]{babel}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage{epstopdf} % automatically replace .eps with .pdf in graphics
\usepackage{array}
\usepackage{latexsym}
\usepackage{etoolbox}
\usepackage{enumerate} 
\usepackage{tcolorbox}
\usepackage{kpfonts}
\usepackage{csquotes}
\usepackage[style=vancouver,backend=biber]{biblatex}
\addbibresource{Bibliography/references.bib}
\usepackage{afterpage}

\newcommand{\fig}[3]{
 \begin{center}
 \scalebox{#3}{\includegraphics[#2]{#1}}
 \end{center}
}

% Define a tcolorbox style for pseudocode
\tcbuselibrary{listingsutf8} % Ensure compatibility with code listings
\tcbset{
  pseudocodebox/.style={
    colframe=black,
    colback=white,
    coltitle=black,
    colbacktitle=white,
    fonttitle=\bfseries,
    boxrule=0.5mm, 
    width=\textwidth,
    sharp corners,
    left=1mm,
    right=1mm,
    bottom=1mm,
    top=1mm
  }
}

\ifxetex
\usepackage{fontspec}
\setmainfont[Scale=.8]{OpenDyslexic-Regular}
\else
\usepackage[pdftex,pagebackref=false,hypertexnames=false,colorlinks]{hyperref}
\hypersetup{pdftitle={},
  pdfsubject={}, 
  pdfauthor={\reportauthor},
  pdfkeywords={}, 
  pdfstartview=FitH,
  pdfpagemode={UseOutlines},% None, FullScreen, UseOutlines
  bookmarksnumbered=true, bookmarksopen=true, colorlinks,
    citecolor=darkgray,
    filecolor=darkgray,
    linkcolor=black,
    urlcolor=darkgray}
\usepackage[all]{hypcap}
\fi

\usepackage{setspace}
\setlength\parskip{\baselineskip}
\setlength{\parskip}{1.5ex}  % Space between paragraphs
\usepackage{enumitem}

% ========================================================================

\begin{document}

\ifxetex
\else
\renewcommand*{\rmdefault}{bch} % Charter
\renewcommand*{\ttdefault}{cmtt} % Computer Modern Typewriter
\fi

\setlength{\parindent}{2em}  % indentation of paragraph
\setlength{\headheight}{14.5pt}

\fancypagestyle{contentstyle}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
  \fancyfoot[]{}
}

\fancypagestyle{chapterstyle}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0.1pt}
  \fancyfoot[ER,OL]{\thepage}
}

\defbibheading{bibliography}[\refname]{
  \chapter*{Bibliography}
  \thispagestyle{chapterstyle}
  \addcontentsline{toc}{chapter}{#1}  
  \pagestyle{fancy} % Apply fancy page style for subsequent pages
  \markboth{\MakeUppercase{BIBLIOGRAPHY}}{}
}

\let\origfootrule\footrule
\renewcommand{\footrule}{\iffootnote{}{\origfootrule}}
\renewcommand\footnoterule{\origfootrule \vspace{1ex}}

% various color definitions
\definecolor{darkgreen}{rgb}{0,0.6,0}
\newcommand{\blue}[1]{{\color{blue}#1}}
\newcommand{\red}[1]{{\color{red}#1}}
\newcommand{\green}[1]{{\color{darkgreen}#1}}
\newcommand{\orange}[1]{{\color{orange}#1}}
\newcommand{\magenta}[1]{{\color{magenta}#1}}
\newcommand{\cyan}[1]{{\color{cyan}#1}}

% redefine emph
\renewcommand{\emph}[1]{\blue{\bf{#1}}}

% place a colored box around a character
\gdef\colchar#1#2{
  \tikz[baseline]{
    \node[anchor=base,inner sep=2pt,outer sep=0pt,fill = #2!20] {#1};
  }
}

%% ========================================================================

% title page
\newgeometry{left=2.4cm, right=2.4cm, top=3.5cm, bottom=2.5cm}
\input{titlepage}
\restoregeometry

% table of contents
\pagestyle{contentstyle}
\addtocontents{toc}{\protect\thispagestyle{contentstyle}}
\tableofcontents 
\clearpage{\pagestyle{empty}}

% reset page numbering styles
\pagenumbering{arabic}
\setcounter{page}{1}
\fancyhead[LE,RO]{\slshape \rightmark}
\fancyhead[LO,RE]{\slshape \leftmark}
\clearpage{\pagestyle{empty}\cleardoublepage}
\setlength{\headheight}{14.5pt}
\pagestyle{fancy}

\renewcommand{\chaptermark}[1]{\markboth{\chaptername\ \thechapter.\ \MakeUppercase{#1}}{}} 
\renewcommand{\sectionmark}[1]{\markright{\thesection.\ #1}}
\fancyfoot[ER,OL]{\thepage}
\fancyfoot[OC,EC]{\sffamily }
\renewcommand{\headrulewidth}{0.1pt}
\renewcommand{\footrulewidth}{0.1pt}
\captionsetup{margin=10pt,font=small,labelfont=bf}


%--- chapter heading
\def\@makechapterhead#1{%
  \vspace*{10\p@}%
  {\parindent \z@ \raggedright \sffamily
    \interlinepenalty\@M
    \Huge\bfseries \thechapter \space\space #1\par\nobreak
    \vskip 30\p@
  }}

%---chapter heading for \chapter*  
\def\@makeschapterhead#1{%
  \vspace*{10\p@}%
  {\parindent \z@ \raggedright
    \sffamily
    \interlinepenalty\@M
    \Huge \bfseries  #1\par\nobreak
    \vskip 30\p@
  }}	
\allowdisplaybreaks

\input{main}

\end{document}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
